<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Heidi ðŸ’˜</title>
  <style>
    :root { --bg1:#fff0f6; --bg2:#ffe4f1; --ink:#2b2b2b; }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh; display:grid; place-items:center;
      font-family: ui-rounded, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      color:var(--ink);
      background: radial-gradient(circle at 20% 10%, var(--bg2), transparent 45%),
                  radial-gradient(circle at 80% 0%, #ffe8f3, transparent 40%),
                  radial-gradient(circle at 70% 90%, #ffe0ef, transparent 55%),
                  linear-gradient(160deg, var(--bg1), #fff);
      overflow:hidden;
    }
    .card{
      width:min(720px, 92vw);
      background: rgba(255,255,255,.75);
      border:1px solid rgba(255, 105, 180, .25);
      box-shadow: 0 20px 60px rgba(255, 20, 147, .15);
      backdrop-filter: blur(10px);
      border-radius: 28px;
      padding: 36px 26px;
      text-align:center;
      position:relative;
    }
    h1{
      margin: 0 0 10px;
      font-size: clamp(28px, 4vw, 44px);
      letter-spacing:.2px;
    }
    p{
      margin: 0 0 22px;
      font-size: clamp(16px, 2.2vw, 18px);
      opacity:.9;
    }
    .heart{
      font-size: 46px;
      animation: beat 1.1s infinite;
      display:inline-block;
      filter: drop-shadow(0 10px 12px rgba(255, 20, 147, .18));
    }
    @keyframes beat{
      0%,100%{ transform: scale(1); }
      40%{ transform: scale(1.16); }
      70%{ transform: scale(1.05); }
    }
    .btns{
      display:flex; gap:14px; justify-content:center; flex-wrap:wrap;
      margin-top: 10px;
    }
    button{
      border:0;
      padding: 14px 22px;
      border-radius: 999px;
      font-weight: 700;
      font-size: 16px;
      cursor:pointer;
      transition: transform .08s ease, box-shadow .15s ease;
      box-shadow: 0 14px 30px rgba(255, 20, 147, .18);
    }
    button:active{ transform: translateY(1px) scale(.99); }
    .yes{
      background: linear-gradient(135deg, #ff4d8d, #ff79b0);
      color:white;
    }
    .yes2{
      background: linear-gradient(135deg, #ff2d6f, #ff6fa6);
      color:white;
    }
    .note{
      margin-top: 18px;
      font-size: 13px;
      opacity:.7;
    }
    .result{
      margin-top: 18px;
      font-size: 18px;
      font-weight: 700;
      display:none;
    }
    .result.show{ display:block; }

    #loveVideo{
      display:none;
      width: 90%;
      max-width: 520px;
      border-radius:20px;
      margin-top:18px;
      box-shadow:0 12px 30px rgba(0,0,0,.2);
      border: 1px solid rgba(255, 105, 180, .25);
    }

    .floaty{
      position:absolute; inset:0; pointer-events:none; opacity:.28;
    }
    .floaty span{
      position:absolute;
      font-size: 18px;
      animation: float 8s linear infinite;
    }
    @keyframes float{
      0%{ transform: translateY(110vh) rotate(0deg); opacity:0; }
      10%{ opacity:.9; }
      90%{ opacity:.9; }
      100%{ transform: translateY(-20vh) rotate(360deg); opacity:0; }
    }
    canvas{ position:fixed; inset:0; pointer-events:none; }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>

  <div class="card">
    <div class="floaty" aria-hidden="true" id="floaty"></div>

    <div class="heart">ðŸ’˜</div>
    <h1>Heidi, will you be my Valentine?</h1>

    <!-- âœ… Put the <p> back so your JS can update it -->
    <p id="subtext">I promise to keep choosing you â€” today and always.</p>

    <div class="btns">
      <button class="yes" id="btnYes1">Yes</button>
      <button class="yes2" id="btnYes2">Yes</button>
    </div>

    <div class="result" id="result">YAY!! Itâ€™s a date ðŸ’–ðŸ¥°</div>

    <!-- âœ… Use MP4 for best phone compatibility -->
    <video id="loveVideo" muted playsinline preload="metadata">
      <source src="val.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>

    <div class="note">Made with love by Elon</div>
  </div>

  <script>
    // Floating hearts
    const floaty = document.getElementById('floaty');
    const hearts = ["ðŸ’—","ðŸ’–","ðŸ’˜","ðŸ’ž","ðŸ’•","ðŸ’“"];
    for (let i=0;i<18;i++){
      const s=document.createElement('span');
      s.textContent=hearts[Math.floor(Math.random()*hearts.length)];
      s.style.left = Math.random()*100 + "%";
      s.style.animationDuration = (6 + Math.random()*6) + "s";
      s.style.animationDelay = (-Math.random()*8) + "s";
      s.style.fontSize = (14 + Math.random()*18) + "px";
      floaty.appendChild(s);
    }

    // Confetti
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    function resize(){ canvas.width=innerWidth; canvas.height=innerHeight; }
    addEventListener('resize', resize); resize();

    let pieces = [];
    function popConfetti(){
      const count = 160;
      for (let i=0;i<count;i++){
        pieces.push({
          x: innerWidth/2 + (Math.random()*120-60),
          y: innerHeight/2 + (Math.random()*60-30),
          r: 2 + Math.random()*4,
          vx: (Math.random()*2-1) * (4 + Math.random()*6),
          vy: (Math.random()*-1) * (8 + Math.random()*10),
          g: 0.35 + Math.random()*0.25,
          a: 1
        });
      }
    }

    function tick(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      pieces = pieces.filter(p => p.a > 0.02 && p.y < innerHeight + 40);
      for (const p of pieces){
        p.vy += p.g;
        p.x += p.vx;
        p.y += p.vy;
        p.a *= 0.985;
        ctx.globalAlpha = p.a;
        ctx.beginPath();
        ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
        ctx.fill();
      }
      ctx.globalAlpha = 1;
      requestAnimationFrame(tick);
    }
    tick();

    const result = document.getElementById('result');
    const subtext = document.getElementById('subtext');
    const video = document.getElementById('loveVideo');

    // Loop between seconds 2â€“6
    function enforceLoop(){
      if (video.currentTime >= 6) video.currentTime = 2;
    }

    function playFromTwoToSix(){
      video.style.display = 'block';

      const startPlayback = async () => {
        video.currentTime = 2;
        try { await video.play(); } catch (e) {
          // If a phone blocks playback, show controls as fallback
          video.setAttribute('controls', 'controls');
        }
      };

      if (video.readyState >= 1) {
        startPlayback();
      } else {
        video.addEventListener('loadedmetadata', startPlayback, { once: true });
      }

      // attach loop guard once
      video.removeEventListener('timeupdate', enforceLoop);
      video.addEventListener('timeupdate', enforceLoop);
    }

    function accept(){
      result.classList.add('show');
      popConfetti();
      subtext.textContent = "i knew you'd choose the right answer. Love you HD ðŸ’–";
      playFromTwoToSix();
    }

    document.getElementById('btnYes1').addEventListener('click', accept);
    document.getElementById('btnYes2').addEventListener('click', accept);
  </script>
</body>
</html>
